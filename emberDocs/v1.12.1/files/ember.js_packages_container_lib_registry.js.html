<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ember.js/packages/container/lib/registry.js - The Ember API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The Ember API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/A Suite can be used to define a reusable set of unit tests that can be
                applied to any object.  Suites are most useful for defining tests that
                work against a mixin or plugin API.  Developers implementing objects that
                use the mixin or support the API can then run these tests against their
                own code to verify compliance.
                
                To define a suite, you need to define the tests themselves as well as a
                callback API implementers can use to tie your tests to their specific class.
                
                ## Defining a Callback API
                
                To define the callback API, just extend this class and add your properties
                or methods that must be provided.
                
                ## Defining Unit Tests
                
                To add unit tests, use the suite.module() or suite.test() methods instead
                of a regular module() or test() method when defining your tests.  This will
                add the tests to the suite.
                
                ## Using a Suite
                
                To use a Suite to test your own objects, extend the suite subclass and
                define any required methods.  Then call run() on the new subclass.  This
                will create an instance of your class and then defining the unit tests..html">A Suite can be used to define a reusable set of unit tests that can be
                applied to any object.  Suites are most useful for defining tests that
                work against a mixin or plugin API.  Developers implementing objects that
                use the mixin or support the API can then run these tests against their
                own code to verify compliance.
                
                To define a suite, you need to define the tests themselves as well as a
                callback API implementers can use to tie your tests to their specific class.
                
                ## Defining a Callback API
                
                To define the callback API, just extend this class and add your properties
                or methods that must be provided.
                
                ## Defining Unit Tests
                
                To add unit tests, use the suite.module() or suite.test() methods instead
                of a regular module() or test() method when defining your tests.  This will
                add the tests to the suite.
                
                ## Using a Suite
                
                To use a Suite to test your own objects, extend the suite subclass and
                define any required methods.  Then call run() on the new subclass.  This
                will create an instance of your class and then defining the unit tests.</a></li>
                                <li><a href="../classes/Backburner.html">Backburner</a></li>
                                <li><a href="../classes/Container.html">Container</a></li>
                                <li><a href="../classes/Ember.html">Ember</a></li>
                                <li><a href="../classes/Ember._Metamorph.html">Ember._Metamorph</a></li>
                                <li><a href="../classes/Ember._MetamorphView.html">Ember._MetamorphView</a></li>
                                <li><a href="../classes/Ember.ActionHandler.html">Ember.ActionHandler</a></li>
                                <li><a href="../classes/Ember.Application.html">Ember.Application</a></li>
                                <li><a href="../classes/Ember.Array.html">Ember.Array</a></li>
                                <li><a href="../classes/Ember.ArrayController.html">Ember.ArrayController</a></li>
                                <li><a href="../classes/Ember.ArrayProxy.html">Ember.ArrayProxy</a></li>
                                <li><a href="../classes/Ember.AttributeBindingsSupport.html">Ember.AttributeBindingsSupport</a></li>
                                <li><a href="../classes/Ember.AutoLocation.html">Ember.AutoLocation</a></li>
                                <li><a href="../classes/Ember.Binding.html">Ember.Binding</a></li>
                                <li><a href="../classes/Ember.Checkbox.html">Ember.Checkbox</a></li>
                                <li><a href="../classes/Ember.ClassNamesSupport.html">Ember.ClassNamesSupport</a></li>
                                <li><a href="../classes/Ember.CollectionView.html">Ember.CollectionView</a></li>
                                <li><a href="../classes/Ember.Comparable.html">Ember.Comparable</a></li>
                                <li><a href="../classes/Ember.Component.html">Ember.Component</a></li>
                                <li><a href="../classes/Ember.computed.html">Ember.computed</a></li>
                                <li><a href="../classes/Ember.ComputedProperty.html">Ember.ComputedProperty</a></li>
                                <li><a href="../classes/Ember.ContainerDebugAdapter.html">Ember.ContainerDebugAdapter</a></li>
                                <li><a href="../classes/Ember.ContainerView.html">Ember.ContainerView</a></li>
                                <li><a href="../classes/Ember.Controller.html">Ember.Controller</a></li>
                                <li><a href="../classes/Ember.ControllerMixin.html">Ember.ControllerMixin</a></li>
                                <li><a href="../classes/Ember.Copyable.html">Ember.Copyable</a></li>
                                <li><a href="../classes/Ember.CoreObject.html">Ember.CoreObject</a></li>
                                <li><a href="../classes/Ember.CoreView.html">Ember.CoreView</a></li>
                                <li><a href="../classes/Ember.DataAdapter.html">Ember.DataAdapter</a></li>
                                <li><a href="../classes/Ember.DefaultResolver.html">Ember.DefaultResolver</a></li>
                                <li><a href="../classes/Ember.Deferred.html">Ember.Deferred</a></li>
                                <li><a href="../classes/Ember.Enumerable.html">Ember.Enumerable</a></li>
                                <li><a href="../classes/Ember.EnumerableUtils.html">Ember.EnumerableUtils</a></li>
                                <li><a href="../classes/Ember.Error.html">Ember.Error</a></li>
                                <li><a href="../classes/Ember.EventDispatcher.html">Ember.EventDispatcher</a></li>
                                <li><a href="../classes/Ember.Evented.html">Ember.Evented</a></li>
                                <li><a href="../classes/Ember.FEATURES.html">Ember.FEATURES</a></li>
                                <li><a href="../classes/Ember.Freezable.html">Ember.Freezable</a></li>
                                <li><a href="../classes/Ember.Handlebars.html">Ember.Handlebars</a></li>
                                <li><a href="../classes/Ember.Handlebars.helpers.html">Ember.Handlebars.helpers</a></li>
                                <li><a href="../classes/Ember.HashLocation.html">Ember.HashLocation</a></li>
                                <li><a href="../classes/Ember.HistoryLocation.html">Ember.HistoryLocation</a></li>
                                <li><a href="../classes/Ember.HTMLBars.html">Ember.HTMLBars</a></li>
                                <li><a href="../classes/Ember.HTMLBars.Helper.html">Ember.HTMLBars.Helper</a></li>
                                <li><a href="../classes/Ember.inject.html">Ember.inject</a></li>
                                <li><a href="../classes/Ember.InjectedProperty.html">Ember.InjectedProperty</a></li>
                                <li><a href="../classes/Ember.Instrumentation.html">Ember.Instrumentation</a></li>
                                <li><a href="../classes/Ember.InstrumentationSupport.html">Ember.InstrumentationSupport</a></li>
                                <li><a href="../classes/Ember.LegacyViewSupport.html">Ember.LegacyViewSupport</a></li>
                                <li><a href="../classes/Ember.LinkView.html">Ember.LinkView</a></li>
                                <li><a href="../classes/Ember.Location.html">Ember.Location</a></li>
                                <li><a href="../classes/Ember.Logger.html">Ember.Logger</a></li>
                                <li><a href="../classes/Ember.Map.html">Ember.Map</a></li>
                                <li><a href="../classes/Ember.MapWithDefault.html">Ember.MapWithDefault</a></li>
                                <li><a href="../classes/Ember.Mixin.html">Ember.Mixin</a></li>
                                <li><a href="../classes/Ember.MutableArray.html">Ember.MutableArray</a></li>
                                <li><a href="../classes/Ember.MutableEnumerable.html">Ember.MutableEnumerable</a></li>
                                <li><a href="../classes/Ember.Namespace.html">Ember.Namespace</a></li>
                                <li><a href="../classes/Ember.NativeArray.html">Ember.NativeArray</a></li>
                                <li><a href="../classes/Ember.NoneLocation.html">Ember.NoneLocation</a></li>
                                <li><a href="../classes/Ember.Object.html">Ember.Object</a></li>
                                <li><a href="../classes/Ember.ObjectController.html">Ember.ObjectController</a></li>
                                <li><a href="../classes/Ember.ObjectProxy.html">Ember.ObjectProxy</a></li>
                                <li><a href="../classes/Ember.Observable.html">Ember.Observable</a></li>
                                <li><a href="../classes/Ember.OrderedSet.html">Ember.OrderedSet</a></li>
                                <li><a href="../classes/Ember.platform.html">Ember.platform</a></li>
                                <li><a href="../classes/Ember.PromiseProxyMixin.html">Ember.PromiseProxyMixin</a></li>
                                <li><a href="../classes/Ember.ProxyMixin.html">Ember.ProxyMixin</a></li>
                                <li><a href="../classes/Ember.ReduceComputedProperty.html">Ember.ReduceComputedProperty</a></li>
                                <li><a href="../classes/Ember.Route.html">Ember.Route</a></li>
                                <li><a href="../classes/Ember.Router.html">Ember.Router</a></li>
                                <li><a href="../classes/Ember.run.html">Ember.run</a></li>
                                <li><a href="../classes/Ember.Select.html">Ember.Select</a></li>
                                <li><a href="../classes/Ember.Service.html">Ember.Service</a></li>
                                <li><a href="../classes/Ember.Set.html">Ember.Set</a></li>
                                <li><a href="../classes/Ember.SortableMixin.html">Ember.SortableMixin</a></li>
                                <li><a href="../classes/Ember.String.html">Ember.String</a></li>
                                <li><a href="../classes/Ember.SubArray.html">Ember.SubArray</a></li>
                                <li><a href="../classes/Ember.TargetActionSupport.html">Ember.TargetActionSupport</a></li>
                                <li><a href="../classes/Ember.TemplateRenderingSupport.html">Ember.TemplateRenderingSupport</a></li>
                                <li><a href="../classes/Ember.Test.html">Ember.Test</a></li>
                                <li><a href="../classes/Ember.Test.Adapter.html">Ember.Test.Adapter</a></li>
                                <li><a href="../classes/Ember.Test.QUnitAdapter.html">Ember.Test.QUnitAdapter</a></li>
                                <li><a href="../classes/Ember.TextArea.html">Ember.TextArea</a></li>
                                <li><a href="../classes/Ember.TextField.html">Ember.TextField</a></li>
                                <li><a href="../classes/Ember.TextSupport.html">Ember.TextSupport</a></li>
                                <li><a href="../classes/Ember.TrackedArray.html">Ember.TrackedArray</a></li>
                                <li><a href="../classes/Ember.View.html">Ember.View</a></li>
                                <li><a href="../classes/Ember.ViewChildViewsSupport.html">Ember.ViewChildViewsSupport</a></li>
                                <li><a href="../classes/Ember.ViewsContextSupport.html">Ember.ViewsContextSupport</a></li>
                                <li><a href="../classes/Ember.ViewTargetActionSupport.html">Ember.ViewTargetActionSupport</a></li>
                                <li><a href="../classes/Ember.VisibilitySupport.html">Ember.VisibilitySupport</a></li>
                                <li><a href="../classes/Function.html">Function</a></li>
                                <li><a href="../classes/HandlebarsCompatibleHelper.html">HandlebarsCompatibleHelper</a></li>
                                <li><a href="../classes/Libraries.html">Libraries</a></li>
                                <li><a href="../classes/Registry.html">Registry</a></li>
                                <li><a href="../classes/String.html">String</a></li>
                                <li><a href="../classes/TransformEachInToHash.html">TransformEachInToHash</a></li>
                                <li><a href="../classes/TransformWithAsToHash.html">TransformWithAsToHash</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ember.html">ember</a></li>
                                <li><a href="../modules/ember-application.html">ember-application</a></li>
                                <li><a href="../modules/ember-debug.html">ember-debug</a></li>
                                <li><a href="../modules/ember-extension-support.html">ember-extension-support</a></li>
                                <li><a href="../modules/ember-handlebars.html">ember-handlebars</a></li>
                                <li><a href="../modules/ember-htmlbars.html">ember-htmlbars</a></li>
                                <li><a href="../modules/ember-metal.html">ember-metal</a></li>
                                <li><a href="../modules/ember-routing.html">ember-routing</a></li>
                                <li><a href="../modules/ember-routing-htmlbars.html">ember-routing-htmlbars</a></li>
                                <li><a href="../modules/ember-routing-views.html">ember-routing-views</a></li>
                                <li><a href="../modules/ember-runtime.html">ember-runtime</a></li>
                                <li><a href="../modules/ember-template-compiler.html">ember-template-compiler</a></li>
                                <li><a href="../modules/ember-testing.html">ember-testing</a></li>
                                <li><a href="../modules/ember-views.html">ember-views</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: ember.js/packages/container/lib/registry.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import Ember from &#x27;ember-metal/core&#x27;; // Ember.assert
import dictionary from &#x27;ember-metal/dictionary&#x27;;
import Container from &#x27;./container&#x27;;

var VALID_FULL_NAME_REGEXP = /^[^:]+.+:[^:]+$/;

var instanceInitializersFeatureEnabled;
if (Ember.FEATURES.isEnabled(&#x27;ember-application-instance-initializers&#x27;)) {
  instanceInitializersFeatureEnabled = true;
}

/**
 A lightweight registry used to store factory and option information keyed
 by type.

 A &#x60;Registry&#x60; stores the factory and option information needed by a
 &#x60;Container&#x60; to instantiate and cache objects.

 The public API for &#x60;Registry&#x60; is still in flux and should not be considered
 stable.

 @private
 @class Registry
 @since 1.11.0
*/
function Registry(options) {
  this.fallback = options &amp;&amp; options.fallback ? options.fallback : null;

  this.resolver = options &amp;&amp; options.resolver ? options.resolver : function() {};

  this.registrations  = dictionary(options &amp;&amp; options.registrations ? options.registrations : null);

  this._typeInjections        = dictionary(null);
  this._injections            = dictionary(null);
  this._factoryTypeInjections = dictionary(null);
  this._factoryInjections     = dictionary(null);

  this._normalizeCache        = dictionary(null);
  this._resolveCache          = dictionary(null);

  this._options               = dictionary(null);
  this._typeOptions           = dictionary(null);
}

Registry.prototype = {
  /**
   A backup registry for resolving registrations when no matches can be found.

   @property fallback
   @type Registry
   */
  fallback: null,

  /**
   @property resolver
   @type function
   */
  resolver: null,

  /**
   @property registrations
   @type InheritingDict
   */
  registrations: null,

  /**
   @private

   @property _typeInjections
   @type InheritingDict
   */
  _typeInjections: null,

  /**
   @private

   @property _injections
   @type InheritingDict
   */
  _injections: null,

  /**
   @private

   @property _factoryTypeInjections
   @type InheritingDict
   */
  _factoryTypeInjections: null,

  /**
   @private

   @property _factoryInjections
   @type InheritingDict
   */
  _factoryInjections: null,

  /**
   @private

   @property _normalizeCache
   @type InheritingDict
   */
  _normalizeCache: null,

  /**
   @private

   @property _resolveCache
   @type InheritingDict
   */
  _resolveCache: null,

  /**
   @private

   @property _options
   @type InheritingDict
   */
  _options: null,

  /**
   @private

   @property _typeOptions
   @type InheritingDict
   */
  _typeOptions: null,

  /**
   The first container created for this registry.

   This allows deprecated access to &#x60;lookup&#x60; and &#x60;lookupFactory&#x60; to avoid
   breaking compatibility for Ember 1.x initializers.

   @private
   @property _defaultContainer
   @type Container
   */
  _defaultContainer: null,

  /**
   Creates a container based on this registry.

   @method container
   @param {Object} options
   @return {Container} created container
   */
  container(options) {
    var container = new Container(this, options);

    // 2.0TODO - remove &#x60;registerContainer&#x60;
    this.registerContainer(container);

    return container;
  },

  /**
   Register the first container created for a registery to allow deprecated
   access to its &#x60;lookup&#x60; and &#x60;lookupFactory&#x60; methods to avoid breaking
   compatibility for Ember 1.x initializers.

   2.0TODO: Remove this method. The bookkeeping is only needed to support
            deprecated behavior.

   @param {Container} newly created container
   */
  registerContainer(container) {
    if (!this._defaultContainer) {
      this._defaultContainer = container;
    }
    if (this.fallback) {
      this.fallback.registerContainer(container);
    }
  },

  lookup(fullName, options) {
    Ember.assert(&#x27;Create a container on the registry (with &#x60;registry.container()&#x60;) before calling &#x60;lookup&#x60;.&#x27;, this._defaultContainer);

    if (instanceInitializersFeatureEnabled) {
      Ember.deprecate(&#x27;&#x60;lookup&#x60; was called on a Registry. The &#x60;initializer&#x60; API no longer receives a container, and you should use an &#x60;instanceInitializer&#x60; to look up objects from the container.&#x27;, false, { url: &quot;http://emberjs.com/guides/deprecations#toc_deprecate-access-to-instances-in-initializers&quot; });
    }

    return this._defaultContainer.lookup(fullName, options);
  },

  lookupFactory(fullName) {
    Ember.assert(&#x27;Create a container on the registry (with &#x60;registry.container()&#x60;) before calling &#x60;lookupFactory&#x60;.&#x27;, this._defaultContainer);

    if (instanceInitializersFeatureEnabled) {
      Ember.deprecate(&#x27;&#x60;lookupFactory&#x60; was called on a Registry. The &#x60;initializer&#x60; API no longer receives a container, and you should use an &#x60;instanceInitializer&#x60; to look up objects from the container.&#x27;, false, { url: &quot;http://emberjs.com/guides/deprecations#toc_deprecate-access-to-instances-in-initializers&quot; });
    }

    return this._defaultContainer.lookupFactory(fullName);
  },

  /**
   Registers a factory for later injection.

   Example:

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();

   registry.register(&#x27;model:user&#x27;, Person, {singleton: false });
   registry.register(&#x27;fruit:favorite&#x27;, Orange);
   registry.register(&#x27;communication:main&#x27;, Email, {singleton: false});
   &#x60;&#x60;&#x60;

   @method register
   @param {String} fullName
   @param {Function} factory
   @param {Object} options
   */
  register(fullName, factory, options) {
    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));

    if (factory === undefined) {
      throw new TypeError(&#x27;Attempting to register an unknown factory: &#x60;&#x27; + fullName + &#x27;&#x60;&#x27;);
    }

    var normalizedName = this.normalize(fullName);

    if (this._resolveCache[normalizedName]) {
      throw new Error(&#x27;Cannot re-register: &#x60;&#x27; + fullName +&#x27;&#x60;, as it has already been resolved.&#x27;);
    }

    this.registrations[normalizedName] = factory;
    this._options[normalizedName] = (options || {});
  },

  /**
   Unregister a fullName

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   registry.register(&#x27;model:user&#x27;, User);

   registry.resolve(&#x27;model:user&#x27;).create() instanceof User //=&gt; true

   registry.unregister(&#x27;model:user&#x27;)
   registry.resolve(&#x27;model:user&#x27;) === undefined //=&gt; true
   &#x60;&#x60;&#x60;

   @method unregister
   @param {String} fullName
   */
  unregister(fullName) {
    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));

    var normalizedName = this.normalize(fullName);

    delete this.registrations[normalizedName];
    delete this._resolveCache[normalizedName];
    delete this._options[normalizedName];
  },

  /**
   Given a fullName return the corresponding factory.

   By default &#x60;resolve&#x60; will retrieve the factory from
   the registry.

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   registry.register(&#x27;api:twitter&#x27;, Twitter);

   registry.resolve(&#x27;api:twitter&#x27;) // =&gt; Twitter
   &#x60;&#x60;&#x60;

   Optionally the registry can be provided with a custom resolver.
   If provided, &#x60;resolve&#x60; will first provide the custom resolver
   the opportunity to resolve the fullName, otherwise it will fallback
   to the registry.

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   registry.resolver = function(fullName) {
      // lookup via the module system of choice
    };

   // the twitter factory is added to the module system
   registry.resolve(&#x27;api:twitter&#x27;) // =&gt; Twitter
   &#x60;&#x60;&#x60;

   @method resolve
   @param {String} fullName
   @return {Function} fullName&#x27;s factory
   */
  resolve(fullName) {
    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));
    var factory = resolve(this, this.normalize(fullName));
    if (factory === undefined &amp;&amp; this.fallback) {
      factory = this.fallback.resolve(fullName);
    }
    return factory;
  },

  /**
   A hook that can be used to describe how the resolver will
   attempt to find the factory.

   For example, the default Ember &#x60;.describe&#x60; returns the full
   class name (including namespace) where Ember&#x27;s resolver expects
   to find the &#x60;fullName&#x60;.

   @method describe
   @param {String} fullName
   @return {string} described fullName
   */
  describe(fullName) {
    return fullName;
  },

  /**
   A hook to enable custom fullName normalization behaviour

   @method normalizeFullName
   @param {String} fullName
   @return {string} normalized fullName
   */
  normalizeFullName(fullName) {
    return fullName;
  },

  /**
   normalize a fullName based on the applications conventions

   @method normalize
   @param {String} fullName
   @return {string} normalized fullName
   */
  normalize(fullName) {
    return this._normalizeCache[fullName] || (
        (this._normalizeCache[fullName] = this.normalizeFullName(fullName))
      );
  },

  /**
   @method makeToString

   @param {any} factory
   @param {string} fullName
   @return {function} toString function
   */
  makeToString(factory, fullName) {
    return factory.toString();
  },

  /**
   Given a fullName check if the container is aware of its factory
   or singleton instance.

   @method has
   @param {String} fullName
   @return {Boolean}
   */
  has(fullName) {
    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));
    return has(this, this.normalize(fullName));
  },

  /**
   Allow registering options for all factories of a type.

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   var container = registry.container();

   // if all of type &#x60;connection&#x60; must not be singletons
   registry.optionsForType(&#x27;connection&#x27;, { singleton: false });

   registry.register(&#x27;connection:twitter&#x27;, TwitterConnection);
   registry.register(&#x27;connection:facebook&#x27;, FacebookConnection);

   var twitter = container.lookup(&#x27;connection:twitter&#x27;);
   var twitter2 = container.lookup(&#x27;connection:twitter&#x27;);

   twitter === twitter2; // =&gt; false

   var facebook = container.lookup(&#x27;connection:facebook&#x27;);
   var facebook2 = container.lookup(&#x27;connection:facebook&#x27;);

   facebook === facebook2; // =&gt; false
   &#x60;&#x60;&#x60;

   @method optionsForType
   @param {String} type
   @param {Object} options
   */
  optionsForType(type, options) {
    this._typeOptions[type] = options;
  },

  getOptionsForType(type) {
    var optionsForType = this._typeOptions[type];
    if (optionsForType === undefined &amp;&amp; this.fallback) {
      optionsForType = this.fallback.getOptionsForType(type);
    }
    return optionsForType;
  },

  /**
   @method options
   @param {String} fullName
   @param {Object} options
   */
  options(fullName, options) {
    options = options || {};
    var normalizedName = this.normalize(fullName);
    this._options[normalizedName] = options;
  },

  getOptions(fullName) {
    var normalizedName = this.normalize(fullName);
    var options = this._options[normalizedName];
    if (options === undefined &amp;&amp; this.fallback) {
      options = this.fallback.getOptions(fullName);
    }
    return options;
  },

  getOption(fullName, optionName) {
    var options = this._options[fullName];

    if (options &amp;&amp; options[optionName] !== undefined) {
      return options[optionName];
    }

    var type = fullName.split(&#x27;:&#x27;)[0];
    options = this._typeOptions[type];

    if (options &amp;&amp; options[optionName] !== undefined) {
      return options[optionName];

    } else if (this.fallback) {
      return this.fallback.getOption(fullName, optionName);
    }
  },

  option(fullName, optionName) {
    Ember.deprecate(&#x27;&#x60;Registry.option()&#x60; has been deprecated. Call &#x60;Registry.getOption()&#x60; instead.&#x27;);
    return this.getOption(fullName, optionName);
  },

  /**
   Used only via &#x60;injection&#x60;.

   Provides a specialized form of injection, specifically enabling
   all objects of one type to be injected with a reference to another
   object.

   For example, provided each object of type &#x60;controller&#x60; needed a &#x60;router&#x60;.
   one would do the following:

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   var container = registry.container();

   registry.register(&#x27;router:main&#x27;, Router);
   registry.register(&#x27;controller:user&#x27;, UserController);
   registry.register(&#x27;controller:post&#x27;, PostController);

   registry.typeInjection(&#x27;controller&#x27;, &#x27;router&#x27;, &#x27;router:main&#x27;);

   var user = container.lookup(&#x27;controller:user&#x27;);
   var post = container.lookup(&#x27;controller:post&#x27;);

   user.router instanceof Router; //=&gt; true
   post.router instanceof Router; //=&gt; true

   // both controllers share the same router
   user.router === post.router; //=&gt; true
   &#x60;&#x60;&#x60;

   @private
   @method typeInjection
   @param {String} type
   @param {String} property
   @param {String} fullName
   */
  typeInjection(type, property, fullName) {
    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));

    var fullNameType = fullName.split(&#x27;:&#x27;)[0];
    if (fullNameType === type) {
      throw new Error(&#x27;Cannot inject a &#x60;&#x27; + fullName +
      &#x27;&#x60; on other &#x27; + type + &#x27;(s).&#x27;);
    }

    var injections = this._typeInjections[type] ||
                     (this._typeInjections[type] = []);

    injections.push({
      property: property,
      fullName: fullName
    });
  },

  /**
   Defines injection rules.

   These rules are used to inject dependencies onto objects when they
   are instantiated.

   Two forms of injections are possible:

   * Injecting one fullName on another fullName
   * Injecting one fullName on a type

   Example:

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   var container = registry.container();

   registry.register(&#x27;source:main&#x27;, Source);
   registry.register(&#x27;model:user&#x27;, User);
   registry.register(&#x27;model:post&#x27;, Post);

   // injecting one fullName on another fullName
   // eg. each user model gets a post model
   registry.injection(&#x27;model:user&#x27;, &#x27;post&#x27;, &#x27;model:post&#x27;);

   // injecting one fullName on another type
   registry.injection(&#x27;model&#x27;, &#x27;source&#x27;, &#x27;source:main&#x27;);

   var user = container.lookup(&#x27;model:user&#x27;);
   var post = container.lookup(&#x27;model:post&#x27;);

   user.source instanceof Source; //=&gt; true
   post.source instanceof Source; //=&gt; true

   user.post instanceof Post; //=&gt; true

   // and both models share the same source
   user.source === post.source; //=&gt; true
   &#x60;&#x60;&#x60;

   @method injection
   @param {String} factoryName
   @param {String} property
   @param {String} injectionName
   */
  injection(fullName, property, injectionName) {
    this.validateFullName(injectionName);
    var normalizedInjectionName = this.normalize(injectionName);

    if (fullName.indexOf(&#x27;:&#x27;) === -1) {
      return this.typeInjection(fullName, property, normalizedInjectionName);
    }

    Ember.assert(&#x27;fullName must be a proper full name&#x27;, this.validateFullName(fullName));
    var normalizedName = this.normalize(fullName);

    var injections = this._injections[normalizedName] ||
                     (this._injections[normalizedName] = []);

    injections.push({
      property: property,
      fullName: normalizedInjectionName
    });
  },


  /**
   Used only via &#x60;factoryInjection&#x60;.

   Provides a specialized form of injection, specifically enabling
   all factory of one type to be injected with a reference to another
   object.

   For example, provided each factory of type &#x60;model&#x60; needed a &#x60;store&#x60;.
   one would do the following:

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();

   registry.register(&#x27;store:main&#x27;, SomeStore);

   registry.factoryTypeInjection(&#x27;model&#x27;, &#x27;store&#x27;, &#x27;store:main&#x27;);

   var store = registry.lookup(&#x27;store:main&#x27;);
   var UserFactory = registry.lookupFactory(&#x27;model:user&#x27;);

   UserFactory.store instanceof SomeStore; //=&gt; true
   &#x60;&#x60;&#x60;

   @private
   @method factoryTypeInjection
   @param {String} type
   @param {String} property
   @param {String} fullName
   */
  factoryTypeInjection(type, property, fullName) {
    var injections = this._factoryTypeInjections[type] ||
                     (this._factoryTypeInjections[type] = []);

    injections.push({
      property: property,
      fullName: this.normalize(fullName)
    });
  },

  /**
   Defines factory injection rules.

   Similar to regular injection rules, but are run against factories, via
   &#x60;Registry#lookupFactory&#x60;.

   These rules are used to inject objects onto factories when they
   are looked up.

   Two forms of injections are possible:

   * Injecting one fullName on another fullName
   * Injecting one fullName on a type

   Example:

   &#x60;&#x60;&#x60;javascript
   var registry = new Registry();
   var container = registry.container();

   registry.register(&#x27;store:main&#x27;, Store);
   registry.register(&#x27;store:secondary&#x27;, OtherStore);
   registry.register(&#x27;model:user&#x27;, User);
   registry.register(&#x27;model:post&#x27;, Post);

   // injecting one fullName on another type
   registry.factoryInjection(&#x27;model&#x27;, &#x27;store&#x27;, &#x27;store:main&#x27;);

   // injecting one fullName on another fullName
   registry.factoryInjection(&#x27;model:post&#x27;, &#x27;secondaryStore&#x27;, &#x27;store:secondary&#x27;);

   var UserFactory = container.lookupFactory(&#x27;model:user&#x27;);
   var PostFactory = container.lookupFactory(&#x27;model:post&#x27;);
   var store = container.lookup(&#x27;store:main&#x27;);

   UserFactory.store instanceof Store; //=&gt; true
   UserFactory.secondaryStore instanceof OtherStore; //=&gt; false

   PostFactory.store instanceof Store; //=&gt; true
   PostFactory.secondaryStore instanceof OtherStore; //=&gt; true

   // and both models share the same source instance
   UserFactory.store === PostFactory.store; //=&gt; true
   &#x60;&#x60;&#x60;

   @method factoryInjection
   @param {String} factoryName
   @param {String} property
   @param {String} injectionName
   */
  factoryInjection(fullName, property, injectionName) {
    var normalizedName = this.normalize(fullName);
    var normalizedInjectionName = this.normalize(injectionName);

    this.validateFullName(injectionName);

    if (fullName.indexOf(&#x27;:&#x27;) === -1) {
      return this.factoryTypeInjection(normalizedName, property, normalizedInjectionName);
    }

    var injections = this._factoryInjections[normalizedName] || (this._factoryInjections[normalizedName] = []);

    injections.push({
      property: property,
      fullName: normalizedInjectionName
    });
  },

  validateFullName(fullName) {
    if (!VALID_FULL_NAME_REGEXP.test(fullName)) {
      throw new TypeError(&#x27;Invalid Fullname, expected: &#x60;type:name&#x60; got: &#x27; + fullName);
    }
    return true;
  },

  validateInjections(injections) {
    if (!injections) { return; }

    var fullName;

    for (var i = 0, length = injections.length; i &lt; length; i++) {
      fullName = injections[i].fullName;

      if (!this.has(fullName)) {
        throw new Error(&#x27;Attempting to inject an unknown injection: &#x60;&#x27; + fullName + &#x27;&#x60;&#x27;);
      }
    }
  },

  normalizeInjectionsHash(hash) {
    var injections = [];

    for (var key in hash) {
      if (hash.hasOwnProperty(key)) {
        Ember.assert(&quot;Expected a proper full name, given &#x27;&quot; + hash[key] + &quot;&#x27;&quot;, this.validateFullName(hash[key]));

        injections.push({
          property: key,
          fullName: hash[key]
        });
      }
    }

    return injections;
  },

  getInjections(fullName) {
    var injections = this._injections[fullName] || [];
    if (this.fallback) {
      injections = injections.concat(this.fallback.getInjections(fullName));
    }
    return injections;
  },

  getTypeInjections(type) {
    var injections = this._typeInjections[type] || [];
    if (this.fallback) {
      injections = injections.concat(this.fallback.getTypeInjections(type));
    }
    return injections;
  },

  getFactoryInjections(fullName) {
    var injections = this._factoryInjections[fullName] || [];
    if (this.fallback) {
      injections = injections.concat(this.fallback.getFactoryInjections(fullName));
    }
    return injections;
  },

  getFactoryTypeInjections(type) {
    var injections = this._factoryTypeInjections[type] || [];
    if (this.fallback) {
      injections = injections.concat(this.fallback.getFactoryTypeInjections(type));
    }
    return injections;
  }
};

function resolve(registry, normalizedName) {
  var cached = registry._resolveCache[normalizedName];
  if (cached) { return cached; }

  var resolved = registry.resolver(normalizedName) || registry.registrations[normalizedName];
  registry._resolveCache[normalizedName] = resolved;

  return resolved;
}

function has(registry, fullName) {
  return registry.resolve(fullName) !== undefined;
}

export default Registry;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
